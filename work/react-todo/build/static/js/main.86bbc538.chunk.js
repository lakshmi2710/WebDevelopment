(this["webpackJsonpreact-todo"]=this["webpackJsonpreact-todo"]||[]).push([[0],[,,,,function(e,t,a){e.exports=a.p+"static/media/spinner.05360875.svg"},function(e,t,a){e.exports=a(12)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(3),s=a.n(c),r=(a(10),a(1)),u=(a(11),function(e,t,a,n){return fetch("/tasks/".concat(e,"/").concat(t),{method:"PUT",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({task:{taskName:a,taskStatus:n}})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}),i=a(4),l=a.n(i),m=function(e){var t=e.onLogin,a=Object(n.useState)(""),c=Object(r.a)(a,2),s=c[0],u=c[1],i=Object(n.useState)(!1),m=Object(r.a)(i,2),d=m[0],f=m[1],h=Object(n.useState)(""),k=Object(r.a)(h,2),g=k[0],j=k[1];return o.a.createElement("div",{id:"login-page"},o.a.createElement("div",{className:"title"},"Welcome to Login Page"),o.a.createElement("div",{className:"login-panel"},o.a.createElement("h2",null,"Please Enter UserName"),o.a.createElement("input",{className:"username",name:"text",type:"text",onChange:function(e){u(e.target.value)},value:s}),d?o.a.createElement("img",{alt:"spinner",src:l.a}):o.a.createElement("button",{className:"create",type:"button",onClick:function(){var e;(e=s,fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))).then((function(e){t(e.data.username),f(!1)})).catch((function(e){j(e.message),f(!1)}))}},"Login"),o.a.createElement("div",{className:"status"},g)))},d=function(e){var t=e.user,a=e.onLogout;return o.a.createElement("ul",null,t.isLoggedIn&&o.a.createElement("div",null,o.a.createElement("button",{className:"logout",type:"button",onClick:function(){fetch("/session",{method:"DELETE"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(){return a()}))}},"Logout")))};var f=function(e){var t=e.taskList,a=e.userinfo,c=Object(n.useState)(!0),s=Object(r.a)(c,2),i=s[0],l=s[1],m=Object(n.useState)(""),d=Object(r.a)(m,2),f=d[0],h=d[1],k=Object(n.useState)("All"),g=Object(r.a)(k,2),j=g[0],p=g[1],b=Object(n.useState)(""),E=Object(r.a)(b,2),v=E[0],N=E[1];if(0===Object.keys(t).length)return"";if(0===Object.keys(t.data).length)return"";function S(e){e.target.classList.contains("update-status")||(e.target.classList.contains("delete-btn")&&u(a.username,e.target.id).then((function(){})).catch((function(e){N(e.message)})),e.target.classList.contains("update")&&/\S/.test(t.data[e.target.id].taskName)&&u(a.username,e.target.id,t.data[e.target.id].taskName,t.data[e.target.id].taskStatus).then((function(){})).catch((function(e){N(e.message)})))}function O(e){e.target.classList.contains("update-text")&&(t.data[e.target.id].taskName=e.target.value),e.target.classList.contains("update-status")&&(t.data[e.target.id].taskStatus=e.target.value),h(""),l(!i)}function y(e){e.target.classList.contains("btn-sort-taskname")&&h("taskNameDec"===f||""===f?"taskNameInc":"taskNameDec"),e.target.classList.contains("btn-sort-taskstatus")&&h("taskStatusDec"===f||""===f?"taskStatusInc":"taskStatusDec"),l(!i)}var L=Object.keys(t.data).sort((function(e,a){if(""!==f&&"undefined"!==typeof t.data[e].taskName&&"undefined"!==typeof t.data[a].taskName)return"taskNameInc"===f?t.data[e].taskName.localeCompare(t.data[a].taskName):"taskNameDec"===f?t.data[a].taskName.localeCompare(t.data[e].taskName):"taskStatusInc"===f?t.data[e].taskStatus.localeCompare(t.data[a].taskStatus):"taskStatusDec"===f?t.data[a].taskStatus.localeCompare(t.data[e].taskStatus):void 0})).filter((function(e){return"undefined"!==typeof t.data[e].taskName&&("All"===j||t.data[e].taskStatus===j)})).map((function(e){return o.a.createElement("div",{id:t.data[e].taskId,onClick:S,onChange:O,stateRefresh:i},o.a.createElement("div",{className:"item"},o.a.createElement("div",null,o.a.createElement("input",{id:t.data[e].taskId,className:"update-text",name:"name",type:"text",value:t.data[e].taskName}),o.a.createElement("select",{id:t.data[e].taskId,className:"update-status",value:t.data[e].taskStatus},o.a.createElement("option",{value:"Done"},"Done"),o.a.createElement("option",{value:"NotDone"},"NotDone")),o.a.createElement("button",{id:t.data[e].taskId,className:"update",type:"button",name:"button"},"update"),o.a.createElement("button",{id:t.data[e].taskId,className:"delete-btn",type:"button",name:"button"},"x"))))}));return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("h3",null,"Filter by Status"),o.a.createElement("select",{id:"theme",className:"filter-status",onChange:function(e){p(e.target.value)}},o.a.createElement("option",{value:"All"},"All"),o.a.createElement("option",{value:"Done"},"Done"),o.a.createElement("option",{value:"NotDone"},"NotDone"))),o.a.createElement("div",{className:"tasks"},o.a.createElement("h1",null,"Task List"),o.a.createElement("ul",null,o.a.createElement("button",{className:"btn-sort-taskname",type:"button",onClick:y},"Sort Task Name"),o.a.createElement("button",{className:"btn-sort-taskstatus",type:"button",onClick:y},"Sort Task Status"),L)),o.a.createElement("div",{className:"status"},v))},h=function(e,t,a){(function(e){return fetch("/tasks/".concat(e),{method:"GET"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(a).then((function(t){e(t)})).catch((function(e){t(e.message)}))},k=function(e){var t=Object(n.useState)([]),a=Object(r.a)(t,2),c=a[0],s=a[1],u=Object(n.useState)([]),i=Object(r.a)(u,2),l=i[0],m=i[1],d=Object(n.useState)(""),k=Object(r.a)(d,2),g=k[0],j=k[1],p=Object(n.useState)("Light"),b=Object(r.a)(p,2),E=b[0],v=b[1],N=Object(n.useState)(""),S=Object(r.a)(N,2),O=S[0],y=S[1];Object(n.useEffect)((function(){e.username&&(h(s,j,e.username),L(),P(E),j(""))}),[e.username]);var L=function(){var t;(t=e.username,fetch("/theme/".concat(t),{method:"GET"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))).then((function(e){v(e.data)})).catch((function(e){j(e.message)}))},P=function(e){"Light"!==e?"Dark"!==e?"Colourful"!==e||y("toDo-panel-colourful"):y("toDo-panel-dark"):y("toDo-panel")};return o.a.createElement("div",{id:"toDo-app"},o.a.createElement("div",{className:"title"},"Welcome to Task Tracking Page"),o.a.createElement("div",{className:O},o.a.createElement(f,{taskList:c,userinfo:e}),o.a.createElement("div",null,o.a.createElement("button",{className:"btn-refresh",type:"button",onClick:function(){h(s,j,e.username),L(E),P(E),j("")}},"Refresh"))),o.a.createElement("div",{className:"theme"},o.a.createElement("select",{id:"theme",className:"theme-select",onChange:function(t){var a=t.target.value;v(a),function(e,t){return fetch("/theme/".concat(e),{method:"PUT",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({theme:t})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(e.username,a).then((function(){P(a)})).catch((function(e){j(e.message)}))},value:E},o.a.createElement("option",{value:"Light"},"Light"),o.a.createElement("option",{value:"Dark"},"Dark"),o.a.createElement("option",{value:"Colourful"},"Colourful"))),o.a.createElement("div",null,o.a.createElement("div",{className:"outgoing"},o.a.createElement("input",{className:"task",name:"text",type:"text",onChange:function(e){m(e.target.value)},value:l}),o.a.createElement("button",{className:"btn-task",type:"button",onClick:function(){var t,a;/\S/.test(l)?(j(""),(t=e.username,a=l,fetch("/tasks/".concat(t),{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({task:{taskName:a,taskStatus:"NotDone"}})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))).then((function(){m("")})).catch((function(e){j(e.message)}))):j("Please Enter valid task")}},"Add Task"),o.a.createElement("div",{className:"status"},g))))};var g=function(){var e,t=Object(n.useState)({isLoggedIn:!1}),a=Object(r.a)(t,2),c=a[0],s=a[1],u=Object(n.useState)(""),i=Object(r.a)(u,2),l=i[0],f=i[1],h=Object(n.useState)(""),g=Object(r.a)(h,2),j=(g[0],g[1]);return Object(n.useEffect)((function(){fetch("/session",{method:"GET"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():Promise.reject({code:"login-invalid"})})).then((function(e){s({isLoggedIn:!0}),f(e.data.username)})).catch((function(e){j(e.error),s({isLoggedIn:!1})}))}),[]),e=c.isLoggedIn?o.a.createElement(k,{username:l}):o.a.createElement(m,{onLogin:function(e){s({isLoggedIn:!0}),f(e)}}),o.a.createElement("div",{className:"App"},o.a.createElement(d,{user:c,onLogout:function(){s({isLoggedIn:!1})}}),e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[5,1,2]]]);
//# sourceMappingURL=main.86bbc538.chunk.js.map