{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/chat.js","webpack:///./src/services.js"],"names":["appState","pollId","isLoggedIn","error","loginDom","document","querySelector","chatDom","newMsg","sendButton","renderLogin","show","remove","body","append","style","visibility","renderChat","renderErrors","text","innerHTML","poll","shouldPoll","setInterval","fetchGetChats","err","renderPage","then","chatMessages","renderMsg","fetchUserList","usersList","renderActiveUsers","clearTimeout","msgDom","chats","map","message","timestamp","username","join","users","userDom","user","login","addEventListener","e","target","classList","contains","value","toUpperCase","fetchLogIn","logout","fetchLogOut","msg","fetchSendMessage","fetchLoginStatus","fetch","method","headers","Headers","JSON","stringify","Promise","reject","code","response","ok","json","result"],"mappings":"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","file":"chat.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/chat.js\");\n","import {\n  fetchLogIn,\n  fetchLoginStatus,\n  fetchGetChats,\n  fetchLogOut,\n  fetchSendMessage,\n  fetchUserList\n} from './services';\n\nconst appState = {\n  pollId: null,\n  isLoggedIn: false,\n  error: '',\n};\n\nconst loginDom = document.querySelector('#login-page');\nconst chatDom = document.querySelector('#chat-app');\nconst newMsg = document.querySelector('.message');\nconst sendButton = document.querySelector('.btn-msg');\n\nfunction renderLogin(show) {\n  if (show) {\n      chatDom.remove();\n      document.body.append(loginDom);\n      loginDom.style.visibility = \"visible\";\n  } else {\n      loginDom.remove();\n  }\n}\n\nfunction renderChat(show) {\n  if (show) {\n      loginDom.remove();\n      document.body.append(chatDom);\n      chatDom.style.visibility = \"visible\";\n  } else {\n      chatDom.style.visibility = \"hidden\";\n  }\n}\n\nfunction renderErrors(text) {\n  document.querySelector('.Status').innerHTML = text;\n}\n\nfunction poll(shouldPoll) {\n  if (shouldPoll && !appState.pollId) {\n      appState.pollId = setInterval(() => {\n          fetchGetChats()\n              .catch((err) => {\n                  poll(false);\n                  appState.error = err.error;\n                  renderPage();\n              })\n              .then((chatMessages) => {\n                  appState.error = '';\n                  renderMsg(chatMessages);\n              });\n\n          fetchUserList()\n              .catch((err) => {\n                  poll(false);\n                  appState.error = err.error;\n                  renderPage();\n              })\n              .then((usersList) => {\n                  appState.error = '';\n                  renderActiveUsers(usersList);\n              });\n      }, 3000);\n  }\n  if (!shouldPoll && appState.pollId) {\n      clearTimeout(appState.pollId);\n      appState.pollId = null;\n  }\n};\n\nfunction renderMsg(chatMessages) {\n  if (chatMessages) {\n      const msgDom = document.querySelector('.message-list');\n      msgDom.innerHTML = chatMessages.chats.map((message) =>\n          `<ul>[${message.timestamp}] ${message.username}: ${message.message}</ul>`\n      ).join('');\n  }\n}\n\nfunction renderActiveUsers(users) {\n  if (users) {\n      const userDom = document.querySelector('.user-list');\n      userDom.innerHTML = users.map((user) => `<p>${user}</p>`).join('');\n  }\n}\n\nfunction renderPage() {\n  if (!appState.isLoggedIn) {\n      renderLogin(true);\n      renderChat(false);\n  } else {\n      renderLogin(false);\n      renderChat(true);\n  }\n  renderErrors(appState.error);\n}\n\nconst login = document.querySelector('.login-panel');\n\nlogin.addEventListener('click', (e) => {\n  if (!e.target.classList.contains('create')) {\n      return;\n  }\n\n  const username = login.querySelector('.username').value.toUpperCase();\n  login.querySelector('.username').value = '';\n  fetchLogIn(username)\n      .then(() => {\n          appState.isLoggedIn = true;\n          appState.error = '';\n          poll(true);\n          renderPage();\n\n      })\n      .catch((err) => {\n          poll(false);\n          appState.error = err.error;\n          renderPage();\n      });\n});\n\n\nconst logout = document.querySelector('.logout');\n\nlogout.addEventListener('click', (e) => {\n  fetchLogOut()\n      .then(() => {\n          appState.isLoggedIn = false;\n          appState.error = '';\n          poll(false);\n          renderPage();\n      })\n      .catch((err) => {\n          poll(false);\n          appState.error = err.error;\n          renderPage();\n      });\n});\n\nsendButton.addEventListener('click', (e) => {\n  const msg = newMsg.value;\n  newMsg.value = '';\n  fetchSendMessage(msg)\n      .then(() => {\n          appState.error = '';\n          appState.isLoggedIn = true;\n          poll(true);\n          renderPage();\n      })\n      .catch((err) => {\n          poll(false);\n          appState.error = err.error;\n          renderPage();\n      });\n});\n\n// Initial load\n\nfetchLoginStatus()\n  .then(() => {\n      appState.isLoggedIn = true;\n      poll(true);\n      renderPage();\n  })\n  .catch(() => {\n      poll(false);\n      appState.isLoggedIn = false;\n      renderPage();\n  });","export const fetchLogIn = (username) => {\n  return fetch('/session', {\n          method: 'POST',\n          headers: new Headers({\n              'content-type': 'application/json',\n          }),\n          body: JSON.stringify({\n              username\n          }),\n      })\n      .catch(() => {\n          return Promise.reject({\n              code: 'network-error'\n          });\n      })\n      .then((response) => {\n          if (!response.ok) {\n              return response.json().then(result => Promise.reject(result));\n          }\n          return response.json();\n      });\n};\n\nexport const fetchLoginStatus = () => {\n  return fetch('/session', {\n          method: 'GET',\n      })\n      .catch(() => {\n          return Promise.reject({\n              code: 'network-error'\n          });\n      })\n      .then((response) => {\n          if (!response.ok) {\n              return Promise.reject({\n                  code: 'login-invalid'\n              });\n          }\n          return;\n      });\n};\n\nexport const fetchUserList = () => {\n  return fetch('/users', {\n          method: 'GET',\n      })\n      .catch(() => {\n          return Promise.reject({\n              code: 'network-error'\n          });\n      })\n      .then((response) => {\n          if (!response.ok) {\n              return response.json().then(result => Promise.reject(result));\n          }\n          return response.json();\n      });\n};\n\nexport const fetchLogOut = () => {\n  return fetch('/session', {\n          method: 'DELETE'\n      })\n      .catch(() => {\n          return Promise.reject({\n              code: 'network-error'\n          });\n      })\n      .then((response) => {\n          if (!response.ok) {\n              return response.json().then(result => Promise.reject(result));\n          }\n          return response.json();\n      });\n};\n\nexport const fetchGetChats = () => {\n  return fetch('/message', {\n          method: 'GET',\n      })\n      .catch(() => {\n          return Promise.reject({\n              code: 'network-error'\n          });\n      })\n      .then((response) => {\n          if (!response.ok) {\n              return response.json().then(result => Promise.reject(result));\n          }\n          return response.json();\n      });\n\n};\n\nexport const fetchSendMessage = (msg) => {\n  return fetch(`/message`, {\n          method: 'POST',\n          body: JSON.stringify({\n              'message': msg\n          }),\n          headers: new Headers({\n              'content-type': 'application/json'\n          })\n      })\n      .catch(() => Promise.reject({\n          error: 'network-error'\n      }))\n      .then((response) => {\n          if (!response.ok) {\n              return response.json().then(result => Promise.reject(result));\n          }\n          return response.json();\n      });\n\n};"],"sourceRoot":""}